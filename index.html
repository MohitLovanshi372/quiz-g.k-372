<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Quiz Game with Voice</title>

<style>
body{
    background: radial-gradient(circle,#000428,#004e92);
    color:white;
    font-family:Arial;
    text-align:center;
}
h1{color:gold;}
button{
    padding:12px 20px;
    font-size:18px;
    margin:10px;
    cursor:pointer;
    background:#1e1e5a;
    color:white;
    border:none;
}
button:hover{background:#3a3aff;}
.option{
    display:block;
    width:360px;
    margin:10px auto;
}
#timer{font-size:22px;color:orange;}
#quizPage,#exitPage{display:none;}
#audiencePoll{
    display:none;
    background:#222;
    padding:15px;
    margin-top:15px;
}
</style>
</head>

<body>

<!-- START PAGE -->
<div id="startPage">
    <h1>üé§ QUIZ GAME üé§</h1>
    <p>GK | Current Affairs | DSA | OOPM | Logical</p>
    <button onclick="startGame()">‚ñ∂ Start Game</button>
    <button onclick="exitGame()">‚ùå Exit</button>
</div>

<!-- QUIZ PAGE -->
<div id="quizPage">
    <h1>üé§ Quiz Game üé§</h1>
    <div id="timer">‚è±Ô∏è 30</div>
    <h2 id="question"></h2>


    <button class="option" onclick="answer(0)"></button>
    <button class="option" onclick="answer(1)"></button>
    <button class="option" onclick="answer(2)"></button>
    <button class="option" onclick="answer(3)"></button>
<button onclick="startListening()">üé§ Speak Answer</button>
<script>
/* üé§ VOICE RECOGNITION */
let recognition;
if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    recognition = new SpeechRecognition();
    recognition.lang = "en-US";
    recognition.continuous = false;
    recognition.interimResults = false;
}

function startListening(){
    if(!recognition){
        alert("Speech Recognition not supported in this browser");
        return;
    }

    speak("Please speak your answer now.");
    recognition.start();

    recognition.onresult = function(event){
        const voiceText = event.results[0][0].transcript.toLowerCase();
        console.log("Heard:", voiceText);

        if(voiceText.includes("a") || voiceText.includes("option a") || voiceText.includes("first")){
            answer(0);
        }
        else if(voiceText.includes("b") || voiceText.includes("option b") || voiceText.includes("second")){
            answer(1);
        }
        else if(voiceText.includes("c") || voiceText.includes("option c") || voiceText.includes("third")){
            answer(2);
        }
        else if(voiceText.includes("d") || voiceText.includes("option d") || voiceText.includes("fourth")){
            answer(3);
        }
        else{
            speak("Sorry, I did not understand. Please say option A, B, C or D.");
        }
    };

    recognition.onerror = function(){
        speak("There was an error. Please try again.");
    };
}
</script>


    <div>
        <button onclick="fiftyFifty()">50-50</button>
        <button onclick="audiencePoll()">Audience Poll</button>
    </div>

    <div id="audiencePoll"></div>
</div>

<!-- EXIT PAGE -->
<div id="exitPage">
    <h1>üèÅ Game Over</h1>
    <p id="finalScore"></p>
    <button onclick="restartGame()">üîÑ Restart</button>
    <button onclick="closeGame()">üö™ Exit</button>
</div>

<script>
/* üîä SPEAK FUNCTION */
function speak(text){
    const speech = new SpeechSynthesisUtterance(text);
    speech.lang = "en-US";
    speech.rate = 0.9;
    speech.pitch = 1;
    window.speechSynthesis.cancel();
    window.speechSynthesis.speak(speech);
}

const questions = [
{q:"Capital of Australia?",o:["Sydney","Canberra","Melbourne","Perth"],a:1},
{q:"Which instrument measures earthquake",o:["Thermometer","Barometer","Seismograph","Hygrometer"],a:2},
{q:"Red Planet?",o:["Earth","Mars","Venus","Jupiter"],a:1},
{q:"Largest ocean?",o:["Indian","Atlantic","Pacific","Arctic"],a:2},
{q:"Telephone inventor?",o:["Newton","Bell","Edison","Tesla"],a:1},

{ q:"Which digital payment system is developed in India?", o:["PayPal","UPI","Visa","Stripe"], a:1 },
{q:"G20 2023 host?",o:["USA","India","Japan","France"],a:1},
{q:"ISRO works in?",o:["Defence","Space","Health","IT"],a:1},
{q:"WC 2023 final venue?",o:["Mumbai","Delhi","Ahmedabad","Chennai"],a:2},
{q:"Ladli Behna Yojana state?",o:["UP","MP","Bihar","RJ"],a:1},

{q:"FIFO data structure?",o:["Stack","Queue","Tree","Graph"],a:1},
{q:"LIFO data structure?",o:["Queue","Stack","Array","List"],a:1},
{q:"Binary search needs?",o:["Sorted array","Unsorted","Tree","Graph"],a:0},
{q:"Binary search complexity?",o:["O(n)","O(log n)","O(n¬≤)","O(1)"],a:1},
{q:"Non linear DS?",o:["Array","Stack","Queue","Tree"],a:3},

{q:"OOP full form?",o:["Object Oriented Programming","Open Office","Object Process","None"],a:0},
{q:"Reusability concept?",o:["Encapsulation","Inheritance","Abstraction","Polymorphism"],a:1},
{q:"Data hiding?",o:["Inheritance","Encapsulation","Abstraction","Polymorphism"],a:1},
{q:"Object keyword C++?",o:["class","new","malloc","create"],a:1},
{q:"Many forms concept?",o:["Inheritance","Encapsulation","Polymorphism","Abstraction"],a:2},

{q:"2,4,8,16,?",o:["18","24","32","64"],a:2},
{q:"1,4,9,16,?",o:["20","24","25","36"],a:2},
{q:"Odd one: Dog, Cat, Cow, Tiger",o:["Dog","Cat","Cow","Tiger"],a:2},
{q:"If ALL=24 then BALL?",o:["48","52","56","60"],a:2},
{q:"2+3=10, 3+4=21 then 4+5?",o:["20","30","36","41"],a:3}
];

let index=0,timeLeft=30,timer,score=0;
let used5050=false,usedAudience=false;

const qEl=document.getElementById("question");
const opts=document.querySelectorAll(".option");
const timerEl=document.getElementById("timer");
const pollEl=document.getElementById("audiencePoll");

function startGame(){
    speak("Welcome to the quiz game. Let's start.");
    document.getElementById("startPage").style.display="none";
    document.getElementById("quizPage").style.display="block";
    loadQuestion();
}

function loadQuestion(){
    clearInterval(timer);
    timeLeft=30;
    timerEl.innerText="‚è±Ô∏è 30";
    pollEl.style.display="none";

    const q=questions[index];
    qEl.innerText=q.q;

    opts.forEach((b,i)=>{
        b.style.display="block";
        b.innerText=String.fromCharCode(65+i)+": "+q.o[i];
    });

    speak("Next question. " + q.q);
    startTimer();
}

function startTimer(){
    timer=setInterval(()=>{
        timeLeft--;
        timerEl.innerText="‚è±Ô∏è "+timeLeft;
        if(timeLeft===0){
            speak("Time is up. Game over.");
            gameOver();
        }
    },1000);
}

function answer(i){
    clearInterval(timer);
    if(i===questions[index].a){
        score++;
        speak("Correct answer.");
    }else{
        speak("Wrong answer.");
    }
    index++;
    if(index<questions.length) loadQuestion();
    else{
        speak("Quiz completed. Well done.");
        gameOver();
    }
}

function fiftyFifty(){
    if(used5050) return alert("50 50 already used");
    used5050=true;
    let c=questions[index].a,rem=0;
    opts.forEach((b,i)=>{
        if(i!==c && rem<2){b.style.display="none";rem++;}
    });
    speak("Fifty fifty lifeline used.");
}

function audiencePoll(){
    if(usedAudience) return alert("Audience poll already used");
    usedAudience=true;
    pollEl.style.display="block";
    let c=questions[index].a,html="";
    for(let i=0;i<4;i++){
        let p=i===c?60+Math.random()*20:Math.random()*20;
        html+=`${String.fromCharCode(65+i)} : ${Math.floor(p)}%<br>`;
    }
    pollEl.innerHTML="<h3>Audience Poll</h3>"+html;
    speak("Audience poll results are displayed.");
}

function gameOver(){
    clearInterval(timer);
    document.getElementById("quizPage").style.display="none";
    document.getElementById("exitPage").style.display="block";
    document.getElementById("finalScore").innerText=
        "Your Score: "+score+" / "+questions.length;
}

function restartGame(){
    index=0;score=0;used5050=false;usedAudience=false;
    speak("Game restarted.");
    document.getElementById("exitPage").style.display="none";
    document.getElementById("startPage").style.display="block";
}

function closeGame(){
    speak("Thank you for playing.");
    alert("You can close the tab now.");
}
</script>

</body>
</html>


